<!DOCTYPE html>
<html lang="en">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script>
    $( document ).ready(function() {
        readFiles();
    });

    function readFiles(){
        var getData;
        var parameters;
        $.get( '/getFiles', parameters, function(data){
            getData = JSON.parse(data);
            var images = $(".images");
            var htmlText = '<table class=imageTable>';

            for(var i=0; i<getData.length; i++){
                //add row for each 4 images
                if(i%4 == 0){
                    htmlText += '<tr>'
                    if(i!=0)
                        htmlText+= '<tr/>'
                }

                var localHtmlText = addImage(getData[i], i);
                htmlText += '<td>'+localHtmlText+'<td/>';
            }
            htmlText+= '<tr/>'
            images.append(htmlText);
        });
    }

    function addImage(imageName, index){
        var location =window.location.protocol+'//'+window.location.hostname+(window.location.port ? ':'+window.location.port: '');
        location += "/show?path="+imageName;

        var htmlText = '<div class=image_block'+index+'>'+
                '<img src='+location+' height="120" width="120"/>'+
                '<input type=checkbox class='+ imageName+' />' +
                '</div>';
        return htmlText;
    }

</script>

<head>
    <meta charset="UTF-8">
    <title>Hello</title>
</head>
<body>
    <div class="images">

    </div>
    <form id='uploadRedirect' action="/uploadPage" method="get">
        <input type="submit" value="Upload new files" />
    </form>
</body>
</html>